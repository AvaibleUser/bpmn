model Event {
  id          BigInt    @id @default(autoincrement())
  organizerId BigInt    @map("organizer_id")
  title       String
  description String
  startsAt    DateTime  @map("starts_at")
  finishedAt  DateTime? @map("finished_at")
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime? @updatedAt @map("updated_at")

  organizer     User           @relation(fields: [organizerId], references: [id])
  registrations Registration[]

  @@map("events")
  @@schema("party")
}

model Registration {
  id           BigInt    @id @default(autoincrement())
  eventId      BigInt    @map("event_id")
  userId       BigInt    @map("user_id")
  registeredAt DateTime  @default(now()) @map("registered_at")
  updatedAt    DateTime? @updatedAt @map("updated_at")

  event Event  @relation(fields: [eventId], references: [id])
  user  User   @relation(fields: [userId], references: [id])
  chats Chat[]

  @@map("event_registrations")
  @@schema("party")
}

model Chat {
  id             BigInt   @id @default(autoincrement())
  registrationId BigInt   @map("registration_id")
  content        String
  sentAt         DateTime @default(now()) @map("sent_at")

  registration Registration @relation(fields: [registrationId], references: [id])

  @@map("event_chats")
  @@schema("party")
}
